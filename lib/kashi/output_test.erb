cake do
  <%- contact_groups_by_id.each do |contact_id, contact_group| -%>
  contact_group <%= contact_id %> do
    group_name <%= contact_group['GroupName'].inspect %>
    desktop_alert <%= contact_group['DesktopAlert'].inspect %>
    email <%= contact_group['Emails'].inspect %>
    boxcar <%= contact_group['Boxcar'].inspect %>
    pushover <%= contact_group['Pushover'].inspect %>
    ping_url <%= contact_group['PingURL'].inspect %>
    mobile <%= contact_group['Mobile'].inspect %>
  end
    <%- if contact_groups_by_id.keys.last != contact_id -%>

    <%- end -%>
  <%- end -%>
  <%- if !contact_groups_by_id.empty? && !tests_by_id.empty? -%>

  <%- end -%>
  <%- tests_by_id.each do |test_id, test| -%>
  test <%= test_id.inspect %> do
    website_name <%= test['WebsiteName'].inspect %>
    website_url <%= test['URI'].inspect %>

    paused <%= test['Paused'] ? 1 : 0 %>
    # HTTP,TCP,PING
    test_type <%= test['TestType'].inspect %>
    contact_group <%= test['ContactGroups'].map { |contact_group| contact_group['Name'] }.inspect %>
    check_rate <%= test['CheckRate'].inspect %>
    timeout <%= test['Timeout'].inspect %>
    website_host <%= test['WebsiteHost'].inspect %>
    node_locations <%= test['NodeLocations'].inspect %>
    find_string <%= test['FindString'].inspect %>
    do_not_find <%= test['DoNotFind'].inspect %>
    logo_image <%= test['LogoImage'].inspect %>

    <%- if %w/SMTP SSH TCP/.include?(test['TestType']) -%>
    port <%= test['Port'].inspect %>
    <%- end -%>
    # ping_url <%= test['PingURL'].inspect %>
    custom_header(
      <%= (test['CustomHeader'] == '' ? '' : JSON.parse(test['CustomHeader'])).inspect %>
    )
    confirmation <%= test['Confirmation'].inspect %>

    basic_user <%= test['BasicUser'].inspect %>
    basic_pass <%= test['BasicPass'].inspect %>

    # public <%= test['Public'].inspect %>
    use_jar <%= test['UseJar'].inspect %>
    # branding <%= test['Branding'].inspect %>
    # virus <%= test['Virus'].inspect %>

    # real_browser <%= test['RealBrowser'].inspect %>
    dns_server <%= test['DNSServer'].inspect %>
    trigger_rate <%= test['TriggerRate'].inspect %>
    test_tags <%= test['Tags'].inspect %>
    status_codes <%= test['StatusCodes'].inspect %>
    enable_ssl_warning <%= test['EnableSSLWarning'] ? 1 : 0 %>
    follow_redirect <%= test['FollowRedirect'] ? 1 : 0 %>
    dns_ip <%= test['DNSIP'].inspect %>
  end
    <%- if tests_by_id.keys.last != test_id -%>

    <%- end -%>
  <%- end -%>
end
